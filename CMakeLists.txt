cmake_minimum_required(VERSION 3.31)
project(Mephi_PATD_Labs C CXX)

set(CMAKE_C_STANDARD 99)
set(CMAKE_CXX_STANDARD 20)

# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 1 —Å–µ–º–µ—Å—Ç—Ä 2 ‚Äî C
add_executable(lab1
        Semester_2_Lab_1/main.c
        Semester_2_Lab_1/matrix_4.c
)
set_target_properties(lab1 PROPERTIES LINKER_LANGUAGE C)

# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 2 —Å–µ–º–µ—Å—Ç—Ä 2 ‚Äî C++
add_executable(lab2
        Semester_2_Lab_2/main.cpp
        Semester_2_Lab_2/Tests.cpp
)

# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 3 —Å–µ–º–µ—Å—Ç—Ä 2 ‚Äî C++
add_executable(lab3
        Semester_2_Lab_3/main.cpp
        Semester_2_Lab_3/Tests.cpp
)

# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 4 —Å–µ–º–µ—Å—Ç—Ä 2 ‚Äî C++
add_executable(lab4
        Semester_2_Lab_4/main_res.cpp
)

# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 5 —Å–µ–º–µ—Å—Ç—Ä 2 ‚Äî C++
add_executable(lab5
        Semester_2_Lab_5/main.cpp
        Semester_2_Lab_5/Deque.cpp
)

# –î–æ–º–∞—à–∫–∞ 1 —Å–µ–º–µ—Å—Ç—Ä 3 ‚Äî C++
add_executable(hw1
        Semester_3_HW_1/main.cpp
        Semester_3_HW_1/UnqPtr.hpp
        Semester_3_HW_1/ShrdPtr.hpp
        Semester_3_HW_1/Sequence.hpp
        Semester_3_HW_1/tests.hpp
)

# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 2 —Å–µ–º–µ—Å—Ç—Ä 3 ‚Äî C++
add_executable(lab_2_sem_3
        Semester_3_Lab_2/main.cpp
        Semester_3_Lab_2/AI.cpp
        Semester_3_Lab_2/AI.hpp
        Semester_3_Lab_2/Board.cpp
        Semester_3_Lab_2/Board.hpp
        Semester_3_Lab_2/dynamic_array.h
        Semester_3_Lab_2/Lists.h
        Semester_3_Lab_2/sequence.h
        Semester_3_Lab_2/Tests.cpp
        Semester_3_Lab_2/Tests.hpp
        Semester_3_Lab_2/Gui.cpp
        Semester_3_Lab_2/Gui.hpp
)
option(ENABLE_GUI "Build with SFML GUI (USE_SFML)" ON)

if (ENABLE_GUI)
    # –ü—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É SFML, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º—É —á–µ—Ä–µ–∑ Homebrew
    set(SFML_DIR "/opt/homebrew/opt/sfml/lib/cmake/SFML")

    # SFML 3.x: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –ó–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã
    find_package(SFML 3 REQUIRED COMPONENTS Graphics Window System)

    message(STATUS "SFML FOUND -> GUI enabled")

    target_compile_definitions(lab_2_sem_3 PRIVATE USE_SFML)

    # –õ–∏–Ω–∫—É–µ–º —Ü–µ–ª–∏ SFML 3.x
    target_link_libraries(lab_2_sem_3
            PRIVATE
            SFML::Graphics
            SFML::Window
            SFML::System
    )

    if (APPLE)
        set(CMAKE_FIND_FRAMEWORK FIRST)
    endif ()
endif ()


# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è 3 —Å–µ–º–µ—Å—Ç—Ä 3 ‚Äî C++
add_executable(lab_3_sem_3
        Semester_3_Lab_3/main.cpp
        Semester_3_Lab_3/ConnectedComponents.cpp
        Semester_3_Lab_3/ConnectedComponents.h
        Semester_3_Lab_3/dynamic_array.h
        Semester_3_Lab_3/Graphs.h
        Semester_3_Lab_3/IGraph.h
        Semester_3_Lab_3/Lists.h
        Semester_3_Lab_3/sequence.h
        Semester_3_Lab_3/Tests_Graph.cpp
        Semester_3_Lab_3/Timer.h
        Semester_3_Lab_3/GraphVizSFML.cpp      # üîß –¥–æ–±–∞–≤–∏–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
)

# üîß –ü—Ä–æ–ª–∏–Ω–∫—É–µ–º SFML –∏ –¥–ª—è lab_3_sem_3 (–∫–∞–∫ –¥–ª—è lab_2_sem_3)
if (ENABLE_GUI)
    # –ï—Å–ª–∏ find_package(SFML 3 ...) –±—ã–ª –≤—ã—à–µ ‚Äî —Ç–∞—Ä–≥–µ—Ç—ã SFML:: —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã
    target_compile_definitions(lab_3_sem_3 PRIVATE USE_SFML)
    target_link_libraries(lab_3_sem_3
            PRIVATE
            SFML::Graphics
            SFML::Window
            SFML::System
    )
endif ()